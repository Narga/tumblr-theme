window.addEventListener("load",()=>{const play=document.querySelector(".play-btn"),next=document.querySelector(".play-next"),prev=document.querySelector(".play-prev");let audio=document.querySelector(".audio"),title=document.querySelector(".music__information"),cover=document.querySelector(".music__inner"),progress=document.querySelector(".music__progress"),counts=document.querySelector(".music__counts"),dursContainer=document.querySelector(".music__duration"),durs=document.querySelector(".totalDurs"),currentDurs=document.querySelector(".currentDurs"),percent=0,current=0,timer;function load(index){this.current=index,title.innerHTML=tracks[current].name,cover.setAttribute("style","background:url('"+tracks[current].cover+"'); background-size:cover;background-position:center;background-repeat:no-repeat;"),audio.innerHTML=`<source src="${tracks[current].src}" type="audio/mp3">`,counts.innerHTML=`${current+1} / ${tracks.length}`,audio.load(),buttonAudio(),audio.onloadedmetadata=function(){durs.innerHTML=durations(audio.duration)},audio.ontimeupdate=function(){currentDurs.innerHTML=durations(audio.currentTime)},audio.onended=function(){play.innerHTML='<i class="las la-play"></i>',progress.style.width="0%"}}function playAudio(){audio.paused?(this.innerHTML='<i class="las la-pause"></i>',audio.play()):(this.innerHTML='<i class="las la-play"></i>',audio.pause())}function nextAudio(){(current<tracks.length-1||!audio.paused)&&(play.innerHTML='<i class="las la-play"></i>',current++,load(current),buttonAudio())}function prevAudio(){(current>0||!audio.paused)&&(play.innerHTML='<i class="las la-play"></i>',current--,load(current),buttonAudio())}function buttonAudio(){prev.disabled=current<=0,next.disabled=current>=tracks.length-1}function startTimer(duration,element){percent<100&&(timer=setTimeout((function(){advance(duration,element)}),100))}function durations(currentTime){var d=currentTime,sec,min=Number();return sec=Math.floor(d),(min=(min=Math.floor(sec/60))>=10?min:"0"+min)+":"+(sec=(sec=Math.floor(sec%60))>=10?sec:"0"+sec)}function advance(duration,element){increment=10/duration,percent=Math.min(increment*element.currentTime*10,100),progress.style.width=percent+"%",startTimer(duration,element)}play.addEventListener("click",playAudio),next.addEventListener("click",nextAudio),prev.addEventListener("click",prevAudio),audio.addEventListener("playing",(function(_event){let duration;advance(_event.target.duration,audio)})),audio.addEventListener("pause",(function(_event){clearTimeout(timer)})),load()});